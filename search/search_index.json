{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"Guia_integracion.html","title":"Inicio","text":""},{"location":"Guia_integracion.html#guia-de-integracion-cctses","title":"Gu\u00eda de Integraci\u00f3n CCTSES","text":"<p>Control de versiones</p> Version Fecha Autor Descripcion 0.1 14/10/2021 Phevos ITC Versi\u00f3n 0.1 0.2 20/11/2021 Phevos ITC Versi\u00f3n 0.2 0.3 03/04/2022 Phevos ITC Versi\u00f3n 0.3 0.4 05/04/2022 Phevos ITC Versi\u00f3n 0.4 0.5 15/10/2023 Phevos ITC Versi\u00f3n 0.5 0.6 06/06/2024 Phevos ITC Versi\u00f3n 0.6"},{"location":"Guia_integracion.html#indice","title":"Indice","text":""},{"location":"Guia_integracion.html#1-introduccion","title":"1. Introducci\u00f3n","text":"<p>El presente documento tiene como objetivo explicar la forma de hacer uso de la interfaz de integraci\u00f3n entre la  aplicaci\u00f3n/software CCTSES y el software de la empresa concesionaria del servicio de transporte Sanitario (en  adelante la Empresa) para poder as\u00ed integrar ambos sistemas.</p> <p>La integraci\u00f3n se realizar\u00e1 a trav\u00e9s de 2 servicios web, de tipo cliente-servidor, utilizando el est\u00e1ndar REST y  JSON como formato para el intercambio de informaci\u00f3n.</p> <p>Para distinguir estos 2 servicios-web, lo nombraremos con los siguientes nombres:</p> <ul> <li> <p>Circuito EMPRESA-TRAMBSES:   Este servicio-web recibir\u00e1 las peticiones enviadas desde el software de la Empresa al aplicativo de TRAMBSES..</p> </li> <li> <p>Circuito TRAMBSES-EMPRESA:   Este servicio-web enviar\u00e1 las peticiones enviadas desde la aplicaci\u00f3n de TRAMBSES al software de la Empresa.</p> </li> </ul>"},{"location":"Guia_integracion.html#2-entornos","title":"2. Entornos","text":"<p>Para poder llevar a cabo la integraci\u00f3n de forma exitosa, se necesita completar unas determinadas fases:</p> <ol> <li>Fase de desarrollo (software de la Empresa)</li> <li>Fase de pruebas en entorno de pruebas (Empresa y TRAMBSES)</li> <li>Fase de pruebas en entorno de pre-producci\u00f3n (Empresa y TRAMBSES)</li> <li>Puesta en producci\u00f3n</li> </ol> <p>Para cada una de las fases de pruebas, es necesario disponer de un entorno para llevar a cabo las pruebas de integraci\u00f3n.</p> <p>La fase en entorno de pruebas pueden no ser obligatorias si ambas partes estuvieran de acuerdo.</p> <p>En cada fase de pruebas se utilizar\u00e1 lo que se denomina una enviroment o entorno, y para cada environment existir\u00e1n una serie de configuraciones distintas, que ser\u00e1 necesario aplicar.</p> <p>En cada environment, cada parte de la integraci\u00f3n (sistemas) tendr\u00e1 una configuraci\u00f3n software y hardware, que ser\u00e1 independiente y no afectar\u00e1 a la misma, pero s\u00ed es necesario definir una serie de informaci\u00f3n que se utilizar\u00e1 para poder conectar con los sistemas.</p> <p>La comunicaci\u00f3n se realizar\u00e1 cifrada a trav\u00e9s de un t\u00fanel seguro entre el Origen y el Destino de la comunicaci\u00f3n.</p>"},{"location":"Guia_integracion.html#configuraciones-necesarias","title":"Configuraciones necesarias:","text":"<ul> <li><code>{server}</code>: indica la informaci\u00f3n del servidor. Direcci\u00f3n IP o DNS.</li> <li><code>{puerto}</code>: indica el n\u00ba puerto a trav\u00e9s del cual se va a realizar la comunicaci\u00f3n.</li> </ul> <p>En cada fase existir\u00e1 una configuraci\u00f3n espec\u00edfica de estos par\u00e1metros de conexi\u00f3n, y para cada circuito.</p> <p>//TODO:: En futuras versiones de este documento se ir\u00e1n incorporando las configuraciones para cada uno de los entornos.</p> <p>Las configuraciones ser\u00e1n distintas para cada circuito.</p>"},{"location":"Guia_integracion.html#3-comunicacion-entre-sistemas","title":"3. Comunicaci\u00f3n entre sistemas","text":"<p>La comunicaci\u00f3n entre los sistemas como se ha mencionado antes se realizar\u00e1 a trav\u00e9s de una conexi\u00f3n segura a trav\u00e9s de un t\u00fanel. La forma de llevar a cabo esta securizaci\u00f3n de la l\u00ednea queda fuera del \u00e1mbito de este documento.</p>"},{"location":"Guia_integracion.html#4-circuitos","title":"4. Circuitos","text":"<p>Cada circuito es indipendiente y tendr\u00e1 una operativa totalmente distinta.</p> <p>Las operaciones disponibles en cada circuito est\u00e1n documentadas a trav\u00e9s de su correspondiente documentaci\u00f3n.</p> <p>Esquema de ciruitos de integraci\u00f3n</p> Esquema de ciruitos de integraci\u00f3n <p> </p> <p>\u00c1mbito de la integraci\u00f3n:</p> <p>La integraci\u00f3n tiene que soportar la siguiente operativa:</p> <p>//TODO: Incluir la operaci\u00f3n aqu\u00ed.</p> <p>Emisi\u00f3n/recepci\u00f3n de traslados (\u00f3rdenes de transporte). Emisi\u00f3n/recepci\u00f3n de status  Emisi\u00f3n/recepci\u00f3n de planificaci\u00f3n de trabajo Emisi\u00f3n/recepci\u00f3n de propuestas de rutas</p>"},{"location":"CircuitoA/CircuitoA-doc_funcional.html","title":"4.2 Tablas","text":""},{"location":"CircuitoA/CircuitoA-doc_funcional.html#circuito-a-empresa-concesionaria-cctses","title":"Circuito A: Empresa Concesionaria - CCTSES","text":""},{"location":"CircuitoA/CircuitoA-doc_funcional.html#entidades-funcionales","title":"Entidades funcionales","text":""},{"location":"CircuitoA/CircuitoA-doc_funcional.html#tb_anulacion_motivos","title":"TB_ANULACION_MOTIVOS","text":"<p>Esta tabla recoge los motivos de anulaci\u00f3n de un traslado. </p> <p>No se permite una anulaci\u00f3n con un identificador de motivo no registrado en la tabla.</p> C\u00f3digo Leyenda Descripci\u00f3n Funcional AA Anul. agenda Anulaci\u00f3n de traslado por cambios en la agenda del servicio BC Baja Civitas Traslado cancelado por baja del paciente en el sistema Civitas BD Bloq. dietario Anulaci\u00f3n debido a bloqueo en el dietario m\u00e9dico CA C. estr. agenda Cancelaci\u00f3n por cambio en la estructura de la agenda CAM Camilla ocupada Traslado anulado porque no hay camilla disponible CC Cancelac. cita Anulaci\u00f3n por cancelaci\u00f3n de la cita m\u00e9dica asociada CD Cita duplicada Traslado cancelado por existir una cita duplicada en el sistema CE Cita err\u00f3nea Anulaci\u00f3n debido a error en el registro de la cita CH Cambio hora Traslado anulado por cambio en la hora de la cita CM Cambio m\u00e9dico Cancelaci\u00f3n por cambio del m\u00e9dico asignado CO Prest. Otro Cen Prestaci\u00f3n realizada en otro centro sanitario CP Cambio Prestac. Anulaci\u00f3n por cambio en el tipo de prestaci\u00f3n m\u00e9dica CT Prest. Cen Conc Prestaci\u00f3n atendida en centro concertado DIN Datos incorrec. Traslado cancelado por datos incorrectos del paciente o servicio DUP Duplicado Anulaci\u00f3n por duplicidad de solicitud de traslado ECR e-Consulta Rech Traslado anulado por rechazo de e-Consulta ENF Enfermo/a Cancelaci\u00f3n porque el paciente est\u00e1 enfermo y no puede acudir ER1 Error en disp. Anulaci\u00f3n por error en el dispositivo de gesti\u00f3n ER2 Rechazo pacient Traslado cancelado por rechazo expl\u00edcito del paciente ERR Error Anulaci\u00f3n por error gen\u00e9rico no especificado EX Exitus Cancelaci\u00f3n por fallecimiento del paciente FAL Fallecido Traslado anulado debido al fallecimiento del paciente FDO Falta document. Cancelaci\u00f3n por falta de documentaci\u00f3n necesaria FHO Fuera de hora Anulaci\u00f3n porque el traslado est\u00e1 fuera del horario establecido FTO Fin tratamiento Traslado cancelado por finalizaci\u00f3n del tratamiento m\u00e9dico HAN Anula hospital Anulaci\u00f3n realizada por el hospital IDA Ida (medios pr) Cancelaci\u00f3n del trayecto de ida por medios propios del paciente IL Ilocalizacion Traslado anulado por imposibilidad de localizar al paciente ING Ingresado Cancelaci\u00f3n porque el paciente est\u00e1 ingresado NCA Ausente casa Traslado anulado por ausencia del paciente en su domicilio NCO Consulta Cancelaci\u00f3n relacionada con la consulta m\u00e9dica NPE Ausente Traslado anulado por ausencia del paciente NSV Sin vuelta sol. Cancelaci\u00f3n del trayecto de vuelta sin solicitud OM Otros motivos Anulaci\u00f3n por motivos no categorizados PA Alta/Traslado Cancelaci\u00f3n por alta m\u00e9dica o traslado a otro centro PAN Paciente anula Traslado anulado por solicitud del paciente PNP Pac. No prepar. Cancelaci\u00f3n porque el paciente no est\u00e1 preparado para el traslado PRE Pac. Ret. 112 Traslado anulado por retenci\u00f3n del paciente por servicio 112 RET Retraso Receta Cancelaci\u00f3n por retraso en la receta m\u00e9dica REU Reubicaci\u00f3n Traslado anulado por reubicaci\u00f3n del servicio o paciente RM Reprog. m\u00faltipl Anulaci\u00f3n por reprogramaci\u00f3n m\u00faltiple de citas RP Reprogramaci\u00f3n Traslado cancelado por reprogramaci\u00f3n de la cita SIF Anulaci\u00f3n SIF Anulaci\u00f3n realizada desde el sistema SIF SM Decisi\u00f3n M\u00e9dica Traslado cancelado por decisi\u00f3n m\u00e9dica SNS Error disp SNS Anulaci\u00f3n por error en el dispositivo del Sistema Nacional de Salud SO Sat. Demanda OM Cancelaci\u00f3n por saturaci\u00f3n de demanda de otros motivos SP Solic. Paciente Traslado anulado por solicitud del paciente SUS Suspensi\u00f3n Anulaci\u00f3n por suspensi\u00f3n del servicio TER Terminaci\u00f3n Traslado cancelado por terminaci\u00f3n del servicio VIN Veh\u00edculo inop. Anulaci\u00f3n por veh\u00edculo inoperativo o no disponible VRE Visado Rechazado Traslado cancelado por rechazo del visado m\u00e9dico VUE Vuelta (medios) Cancelaci\u00f3n del trayecto de vuelta por medios propios del paciente"},{"location":"CircuitoA/CircuitoA-doc_funcional.html#tb_traslado_estados","title":"TB_TRASLADO_ESTADOS","text":"<p>Esta tabla recoge los estados por los que un traslado puede pasar desde su alta, hasta su finalizaci\u00f3n.</p> C\u00f3digo Leyenda Descripci\u00f3n Funcional P PENDIENTE Traslado creado pero sin asignar recursos (conductor ni veh\u00edculo) A ASIGNADO Traslado asignado a conductor y veh\u00edculo espec\u00edficos CC CONFIRMADO CONDUCTOR El conductor ha confirmado y visualizado el traslado en el Terminal Embarcado LO LLEGADO-ORIGEN El veh\u00edculo ha llegado al punto de origen para la recogida del paciente E CURSADO El paciente est\u00e1 embarcado en la ambulancia y el traslado est\u00e1 en curso LD LLEGADO-DESTINO El veh\u00edculo ha llegado al punto de destino con el paciente <p>Diagrama de Flujo de Estados del Traslado</p> <pre><code>stateDiagram-v2\n    Pendiente --&gt; Asignado: Traslado tiene asignado vehiculo/conductor\n    Asignado --&gt; Pendiente: Traslado des-asignan recurso \n    Asignado --&gt; ConfirmadoConductor: Conductor ha confirmado la visualizaci\u00f3n del traslado en el terminal\n    ConfirmadoConductor --&gt; LlegadaOrigen: Vehiculo llega al punto de origen\n    LlegadaOrigen --&gt; EnCurso: Paciente montado en ambulancia\n    EnCurso --&gt; LlegadaDestino: Vehiculo llega al punto de destino\n    LlegadaDestino --&gt; Finalizado: Traslado finalizado</code></pre>"},{"location":"CircuitoA/CircuitoA-doc_funcional.html#tb_vehiculo_estados","title":"TB_VEHICULO_ESTADOS","text":"<p>Esta tabla recoge los estados de un veh\u00edculo/ambulancia en su diario de trabajo.</p> C\u00f3digo Leyenda Descripci\u00f3n Funcional 0 Rojo Veh\u00edculo sin conductor logueado y sin actividad indicada (fuera de servicio) 1 Verde Conductor logueado y veh\u00edculo disponible sin traslados en ejecuci\u00f3n 2 Naranja Conductor logueado y veh\u00edculo disponible retornando a base sin pacientes 3 Amarillo Veh\u00edculo en ruta para recoger al primer paciente de la ruta 4 Azul Veh\u00edculo con al menos un paciente a bordo, transportando o recogiendo pacientes adicionales 10 AmarilloRecoger Veh\u00edculo llegado al punto de recogida del primer paciente, esperando embarque 11 AzulRecoger Veh\u00edculo con paciente(s) a bordo, llegado al punto de recogida de paciente adicional 12 AzulBajar Veh\u00edculo llegado a punto de destino, iniciando desembarque de paciente(s) <p>Diagrama de Flujo de Estados del Veh\u00edculo</p> <pre><code>stateDiagram-v2\n    [*] --&gt; Rojo: Sistema iniciado\n    Rojo --&gt; Verde: Login conductor\n    Verde --&gt; Amarillo: Iniciar recogida 1\u00ba paciente\n    Amarillo --&gt; AmarilloRecoger: Llegada punto recogida\n    AmarilloRecoger --&gt; Azul: Paciente montado\n    Azul --&gt; AzulRecoger: En punto recogida siguiente paciente\n    AzulRecoger --&gt; Azul: Paciente adicional montado\n    Azul --&gt; AzulBajar: Llegada punto destino\n    AzulBajar --&gt; Verde: Todos bajados / Ambulancia lista\n    AzulBajar --&gt; Naranja: Retorno a base\n    Verde --&gt; Naranja: Retorno a base\n    Naranja --&gt; Verde: Disponible en base\n    Verde --&gt; Rojo: Logout conductor\n    Rojo --&gt; [*]: Fin de servicio</code></pre>"},{"location":"CircuitoA/CircuitoA-doc_funcional.html#tb_actividad_tipos","title":"TB_ACTIVIDAD_TIPOS","text":"<p>Una actividad indica el tipo de operativa o tipo de servicio que la ambulancia va a realizar durante esta jornada o turno de trabajo.</p> <p>Esta tabla recoge los tipos de actividades que son objeto de integraci\u00f3n.</p> C\u00f3digo Leyenda Descripci\u00f3n Funcional 1 PROGRAMADO Traslados sanitarios programados con antelaci\u00f3n (citas, consultas, tratamientos) 2 URGENCIA Servicios de urgencia no programados que requieren atenci\u00f3n inmediata 3 UME Unidad Medicalizada de Emergencia para situaciones cr\u00edticas con soporte vital avanzado 4 UP ??? 5 CENTRO SALUD Traslados espec\u00edficos desde/hacia centros de salud de atenci\u00f3n primaria 6 UMTS Unidad M\u00f3vil de Transporte Sanitario para traslados medicalizados 7 UMAR Unidad M\u00f3vil de Alta Resoluci\u00f3n para atenci\u00f3n especializada in situ 8 SVB Soporte Vital B\u00e1sico para emergencias que requieren atenci\u00f3n sanitaria sin medicalizar"},{"location":"CircuitoA/CircuitoA-doc_funcional.html#tb_motivo_status","title":"TB_MOTIVO_STATUS","text":"<p>Los llamados <code>status</code> son una parte fundamental del sistema, ya que permiten conocer en tiempo real la situaci\u00f3n de la flota,  a trav\u00e9s del estado de sus recursos, vehiculos, traslados, .. y la operativa que se realiza en cada uno de ellos.</p> <p>Cada recurso tiene un conjunto de <code>status</code> que debe reportar.</p> <p>Cada <code>status</code> reportar\u00e1 una informaci\u00f3n u otra, dependiendo del tipo de recurso, y por tanto la informaci\u00f3n obligatoria ser\u00e1 diferente en base al tipo de <code>status</code>.</p> <p>En base en esto los tipos de <code>status</code> se pueden puede generar por los siguientes recursos:</p> <ul> <li><code>VEHICULO-ESTADO</code>: Cambios de estado de un veh\u00edculo.</li> <li><code>VEHICULO-MODOS</code>: Estados especiales de funcionamiento que puede estar un veh\u00edculo. </li> <li><code>VEHICULO-POSICIONAMIENTO</code>: Informaci\u00f3n a intervalos peri\u00f3dicos de informaci\u00f3n GPS del veh\u00edculo.</li> <li><code>TRASLADO</code>: Cambios de estados por los que pasa un traslado en su ejecuci\u00f3n.</li> <li><code>JORNADA</code>: Cambios de estados de una jornada de trabajo.</li> </ul> <p>De esta forma, los motivos de los cambios de estado son estos:</p>"},{"location":"CircuitoA/CircuitoA-doc_funcional.html#tipo-vehiculo-posicionamiento","title":"Tipo: VEHICULO-POSICIONAMIENTO","text":"<p>Campos requeridos:</p> <ul> <li><code>idVehiculo</code> - Matr\u00edcula del veh\u00edculo</li> <li><code>idUnidad</code> - Unidad administrativa</li> <li><code>fechaHora</code> - Fecha y hora de la posici\u00f3n</li> <li><code>idMotivo</code> - Motivo del status (c\u00f3digo 1: LOCALIZACION o c\u00f3digo 11: INFORMACION-PERIODICA)</li> <li><code>gps</code> - Posici\u00f3n GPS del veh\u00edculo (longitud, latitud, rumbo, velocidad)</li> <li><code>idActividadJornada</code> - Tipo de actividad de la jornada</li> <li><code>idJornada</code> - Identificador de la jornada de trabajo</li> <li><code>idEstadoVehiculo</code> - Estado actual del veh\u00edculo (opcional pero recomendado en INFORMACION-PERIODICA)</li> </ul> <p>Tabla de Referencia:</p> C\u00f3digo Leyenda Descripci\u00f3n Funcional Referencia 1 LOCALIZACION Informaci\u00f3n de localizaci\u00f3n y posicionamiento GPS del veh\u00edculo Ver secci\u00f3n Veh\u00edculo 11 INFORMACION-PERIODICA Env\u00edo peri\u00f3dico de informaci\u00f3n completa del estado y posici\u00f3n del veh\u00edculo Ver secci\u00f3n Veh\u00edculo"},{"location":"CircuitoA/CircuitoA-doc_funcional.html#tipo-traslado","title":"Tipo: TRASLADO","text":"<p>Los estados por los que pasa un traslado est\u00e1n recogidos en la tabla <code>TB_TRASLADO_ESTADOS</code>.</p> <p>Campos requeridos:</p> <ul> <li><code>idTrasladoCCTSES</code> - ID \u00fanico del traslado en CCTSES (si fue generado por CCTSES)</li> <li><code>idTrasladoExterno</code> - ID \u00fanico del traslado en el sistema externo</li> <li><code>idVehiculo</code> - Matr\u00edcula del veh\u00edculo asignado</li> <li><code>idUnidad</code> - Unidad administrativa</li> <li><code>idEstadoTraslado</code> - Estado del traslado (referencia <code>TB_TRASLADO_ESTADOS</code>)</li> <li><code>fechaHora</code> - Fecha y hora del cambio de estado del traslado</li> <li><code>idMotivo</code> - Motivo del status (c\u00f3digo 2: TRASLADO CAMBIO ESTADO, 4: TRASLADO-ASIGNACION, 5: TRASLADO-DESASIGNACI\u00d3N)</li> <li><code>gps</code> - Posici\u00f3n GPS del veh\u00edculo en el momento del cambio de estado</li> <li><code>idActividadJornada</code> - Tipo de actividad de la jornada</li> <li><code>idJornada</code> - Identificador de la jornada de trabajo</li> </ul> <p>Tabla de Referencia:</p> C\u00f3digo Leyenda Descripci\u00f3n Funcional Referencia 2 TRASLADO CAMBIO ESTADO Notificaci\u00f3n de cambio de estado en el ciclo de vida de un traslado Ver <code>TB_TRASLADO_ESTADOS</code> 4 TRASLADO-ASIGNACION Asignaci\u00f3n de recursos (conductor y veh\u00edculo) a un traslado espec\u00edfico Ver <code>TB_TRASLADO_ESTADOS</code> 5 TRASLADO-DESASIGNACI\u00d3N Liberaci\u00f3n de recursos previamente asignados a un traslado Ver <code>TB_TRASLADO_ESTADOS</code>"},{"location":"CircuitoA/CircuitoA-doc_funcional.html#tipo-vehiculo-estado","title":"Tipo: VEHICULO-ESTADO","text":"<p>Los estados por los que pasa un veh\u00edculo est\u00e1n recogidos en la tabla <code>TB_VEHICULO_ESTADOS</code>.</p> <p>La gesti\u00f3n de un veh\u00edculo est\u00e1 estrechamente vinculada a la Jornada de Trabajo y a la actividad que se realiza en ella. Un <code>status</code> de un veh\u00edculo siempre debe estar encuadrado en una Jornada de Trabajo, y en la jornada se realizar\u00e1 un tipo de Actividad espec\u00edfico.</p> <p>Campos requeridos:</p> <ul> <li><code>idVehiculo</code> - Matr\u00edcula del veh\u00edculo</li> <li><code>idUnidad</code> - Unidad administrativa</li> <li><code>idEstadoVehiculo</code> - Estado del veh\u00edculo (referencia <code>TB_VEHICULO_ESTADOS</code>)</li> <li><code>fechaHora</code> - Fecha y hora del cambio de estado</li> <li><code>idMotivo</code> - Motivo del cambio (c\u00f3digo 3: VEHICULO CAMBIO ESTADO)</li> <li><code>gps</code> - Posici\u00f3n GPS del veh\u00edculo (longitud, latitud, rumbo, velocidad)</li> <li><code>idActividadJornada</code> - Tipo de actividad de la jornada (referencia <code>TB_ACTIVIDAD_TIPOS</code>)</li> <li><code>idJornada</code> - Identificador de la jornada de trabajo</li> </ul> <p>Tabla de Referencia:</p> C\u00f3digo Leyenda Descripci\u00f3n Funcional Referencia 3 VEHICULO CAMBIO ESTADO Notificaci\u00f3n de cambio en el estado operativo del veh\u00edculo Ver <code>TB_VEHICULO_ESTADOS</code>"},{"location":"CircuitoA/CircuitoA-doc_funcional.html#tipo-vehiculo-modos-modos-especiales","title":"Tipo: VEHICULO-MODOS (Modos Especiales)","text":"<p>Campos requeridos:</p> <ul> <li><code>idVehiculo</code> - Matr\u00edcula del veh\u00edculo</li> <li><code>idUnidad</code> - Unidad administrativa</li> <li><code>fechaHora</code> - Fecha y hora del cambio de modo</li> <li><code>idMotivo</code> - Motivo del status (c\u00f3digo 24: Ninguno, 25: Comida, 26: Fuera-Servicio)</li> <li><code>gps</code> - Posici\u00f3n GPS del veh\u00edculo</li> <li><code>idActividadJornada</code> - Tipo de actividad de la jornada</li> <li><code>idJornada</code> - Identificador de la jornada de trabajo</li> </ul> <p>Tabla de Referencia:</p> C\u00f3digo Leyenda Descripci\u00f3n Funcional Referencia 24 Ninguno Veh\u00edculo en modo operativo normal sin modos especiales activos Ver secci\u00f3n Veh\u00edculo 25 Comida Veh\u00edculo y tripulaci\u00f3n en tiempo de descanso para comida (temporalmente no disponible) Ver secci\u00f3n Veh\u00edculo 26 Fuera-Servicio Veh\u00edculo temporalmente fuera de servicio por mantenimiento, ITV, reparaci\u00f3n en taller, etc. Ver secci\u00f3n Veh\u00edculo"},{"location":"CircuitoA/CircuitoA-doc_funcional.html#tipo-jornada","title":"Tipo: JORNADA","text":"<p>Campos requeridos:</p> <ul> <li><code>idVehiculo</code> - Matr\u00edcula del veh\u00edculo</li> <li><code>idUnidad</code> - Unidad administrativa</li> <li><code>fechaHora</code> - Fecha y hora del evento de jornada</li> <li><code>idMotivo</code> - Motivo del status (c\u00f3digo 30: Inicio, 31: Fin)</li> <li><code>gps</code> - Posici\u00f3n GPS del veh\u00edculo</li> <li><code>idActividadJornada</code> - Tipo de actividad que se va a realizar en la jornada (referencia <code>TB_ACTIVIDAD_TIPOS</code>)</li> <li><code>idJornada</code> - Identificador \u00fanico de la jornada de trabajo</li> </ul> <p>Tabla de Referencia:</p> C\u00f3digo Leyenda Descripci\u00f3n Funcional Referencia 30 Inicio Inicio de jornada laboral del conductor con login en el sistema Ver secci\u00f3n Veh\u00edculo 31 Fin Finalizaci\u00f3n de jornada laboral del conductor con logout del sistema Ver secci\u00f3n Veh\u00edculo"},{"location":"CircuitoA/CircuitoA-doc_funcional.html#tipo-generico","title":"Tipo: GEN\u00c9RICO","text":"C\u00f3digo Leyenda Descripci\u00f3n Funcional Referencia 0 DESCONOCIDA Estado no categorizado o error en la identificaci\u00f3n del tipo de status N/A"},{"location":"CircuitoA/CircuitoA-doc_funcional.html#reglas-funcionales-generales","title":"Reglas Funcionales Generales","text":"<ul> <li>Frecuencia: Los datos de stock se actualizan cada 5 minutos.</li> <li>Ventanas de mantenimiento: La API puede devolver 503 los domingos de 03:00 a 04:00 AM. ```</li> </ul>"},{"location":"CircuitoA/circuitoA-doc.html","title":"4.1 Empresa - \ufe0fCCTSES","text":""},{"location":"CircuitoA/circuitoA-doc.html#41-circuitoa-empresa-cctses","title":"4.1 CircuitoA. Empresa \u27a1\ufe0f CCTSES","text":"<p>Este servicio-web recibir\u00e1 las peticiones enviadas desde la empresa concesionaria a CCTSES.</p>"},{"location":"CircuitoA/circuitoA-doc.html#411-informacion-general-de-la-api","title":"4.1.1 Informaci\u00f3n general de la API","text":"<ul> <li>Nombre: API de Integraci\u00f3n de Transporte</li> <li>Versi\u00f3n: 1.6</li> <li>Base URL: https://api.miempresa.com/v1</li> </ul> <pre><code>sequenceDiagram\n    %% Participantes (izquierda a derecha)\n    participant Empresa\n    participant cctses\n\n    %% 1) POST status\n    Empresa-&gt;&gt;cctses: POST /api/integra/trans/v1/status/\n    cctses--&gt;&gt;Empresa: 201 Created Response\n\n    %% 2) DELETE traslado/{trasladoIDs}\n    Empresa-&gt;&gt;cctses: DELETE /api/integra/trans/v1/traslado/{trasladoIDs}\n    cctses--&gt;&gt;Empresa: 201 Created Response\n\n    %% 3) PUT traslado/reactivar\n    Empresa-&gt;&gt;cctses: PUT /api/integra/trans/v1/traslado/reactivar\n    cctses--&gt;&gt;Empresa: 201 Created Response\n\n    %% 4) PUT traslado/setPacienteAvisar/{trasladoId}\n    Empresa-&gt;&gt;cctses: PUT /api/integra/trans/v1/traslado/setPacienteAvisar/{trasladoId}\n    cctses--&gt;&gt;Empresa: 201 Created Response</code></pre>"},{"location":"CircuitoA/circuitoA-doc.html#412-operaciones-rest","title":"4.1.2 Operaciones REST","text":"<p>1) POST /api/integra/trans/v1/status/</p> Propiedad Descripci\u00f3n M\u00e9todo POST Ruta /api/integra/trans/v1/status/ operationId status Resumen Crea o actualiza una orden (evento de estado) Descripci\u00f3n Informa estados puntuales de recursos (veh\u00edculo, traslado, jornada) y posicionamiento GPS.Casos de uso:- cambio de estado de traslado/veh\u00edculo,- inicio/fin de jornada, - modos especiales,- informaci\u00f3n peri\u00f3dica,- asignaci\u00f3n/desasignaci\u00f3n de traslado.Todos estos casos quedan recogidos en motivo_status Body application/json: StatusInfo Respuestas 201: Response400: Response (validaci\u00f3n)500: Response (error interno) Tipos de datos <p>StatusInfo</p> Propiedad Tipo Descripci\u00f3n status array Lista de elementos Status a reportar en la operaci\u00f3n. <p>Status</p> Propiedad Tipo Descripci\u00f3n idTrasladoCCTSES string Id \u00fanico del traslado en CCTSES (opcional). idTrasladoExterno string Id \u00fanico del traslado en el sistema externo (opcional). idVehiculo string Matr\u00edcula del veh\u00edculo asociado al status (requerido). idUnidad string Id de la unidad administrativa asociada al status (requerido). idEstadoTraslado string Id del estado del traslado (opcional). Referencia: TB_TRASLADO_ESTADOS. idEstadoVehiculo string Id del estado del veh\u00edculo (opcional). Referencia: TB_VEHICULO_ESTADOS. fechaHora date-time Fecha y hora del estado en hora local (formato ISO 8601). Ejemplo: 2021-02-12T20:26:28+02:00 (requerido). idMotivo string Motivo/origen del status (opcional). Referencia: TB_MOTIVO_ESTADOS. gps Gps Posici\u00f3n GPS donde se ha generado el status (opcional seg\u00fan caso de uso). idActividadJornada string Tipo de actividad de la jornada (opcional). Referencia: TB_ACTIVIDAD_TIPOS. idJornada string Id/c\u00f3digo de la jornada en la que se ha generado este status (opcional). <p>Gps</p> Propiedad Tipo Descripci\u00f3n longitud string Longitud en grados decimales. latitud string Latitud en grados decimales. rumbo number Rumbo del veh\u00edculo (grados). velocidad integer Velocidad del veh\u00edculo. <p>Ejemplo de request </p><pre><code>{\n  \"status\": [\n    {\n      \"idTrasladoCCTSES\": \"TR-1001\",\n      \"idTrasladoExterno\": \"EXT-9A\",\n      \"idVehiculo\": \"0001-JKL\",\n      \"idUnidad\": \"U-12\",\n      \"idEstadoTraslado\": \"E\",\n      \"idEstadoVehiculo\": \"4\",\n      \"fechaHora\": \"2025-02-12T20:26:28+02:00\",\n      \"idMotivo\": \"2\",\n      \"gps\": {\n        \"longitud\": \"-0.376288\",\n        \"latitud\": \"39.469907\",\n        \"rumbo\": 180,\n        \"velocidad\": 42\n      },\n      \"idActividadJornada\": \"1\",\n      \"idJornada\": \"JRN-2025-001\"\n    }\n  ]\n}\n</code></pre><p></p> <p>Ejemplo de respuesta (201) </p><pre><code>{\n  \"resultado\": {\n    \"estado\": \"AA\",\n    \"codigo\": \"000\",\n    \"descripcion\": \"OK\"\n  }\n}\n</code></pre><p></p> <p>2) DELETE /api/integra/trans/v1/traslado/{trasladoIDs}</p> Propiedad Descripci\u00f3n M\u00e9todo DELETE Ruta /api/integra/trans/v1/traslado/{trasladoIDs} operationId traslado Resumen Anula uno o varios traslados Descripci\u00f3n Petici\u00f3n de anulaci\u00f3n para una lista de traslados (IDs separados por coma). Respuestas 201: Response400: Response500: Response Reglas/Observaciones El motivo de anulaci\u00f3n debe existir en TB_ANULACION_MOTIVOS. El sistema rechazar\u00e1 c\u00f3digos no registrados. Par\u00e1metros <p>Path</p> Propiedad Tipo Descripci\u00f3n trasladoIDs string IDs separados por \",\". Requerido. <p>Query</p> Propiedad Tipo Descripci\u00f3n fechaHora date-time Fecha y hora de la solicitud. Requerido. idMotivo string Motivo de la anulaci\u00f3n. Requerido. txMotivo string Texto libre del motivo de la anulaci\u00f3n. Opcional. <p>Ejemplo de llamada </p><pre><code>DELETE /api/integra/trans/v1/traslado/TR-1001,TR-1002?fechaHora=2025-11-15T09:00:00Z&amp;idMotivo=SP&amp;txMotivo=Anula%20paciente\n</code></pre><p></p> <p>Ejemplo de respuesta (201) </p><pre><code>{\n  \"resultado\": {\n    \"estado\": \"AA\",\n    \"codigo\": \"000\",\n    \"descripcion\": \"OK\"\n  }\n}\n</code></pre><p></p> <p>3) PUT /api/integra/trans/v1/traslado/reactivar</p> Propiedad Descripci\u00f3n M\u00e9todo PUT Ruta /api/integra/trans/v1/traslado/reactivar operationId putTrasladoReactivacion Resumen Reactiva uno o varios traslados Body application/json: TrasladoReactivaDto Respuestas 201: Response400: Response500: Response Tipos de datos <p>TrasladoReactivaDto</p> Propiedad Tipo Descripci\u00f3n trasladoIDs string ID o IDs de los traslados separados por coma (opcional). fechaHora date-time Fecha y hora de la solicitud de reactivaci\u00f3n (requerido). idMotivo string Motivo de la reactivaci\u00f3n (requerido). txMotivo string Texto libre del motivo de la reactivaci\u00f3n (opcional). <p>Ejemplo de request </p><pre><code>{\n  \"trasladoIDs\": \"TR-1001,TR-1002\",\n  \"fechaHora\": \"2025-11-15T10:15:00Z\",\n  \"idMotivo\": \"REU\",\n  \"txMotivo\": \"Reactivaci\u00f3n por reubicaci\u00f3n\"\n}\n</code></pre><p></p> <p>Ejemplo de respuesta (201) </p><pre><code>{\n  \"resultado\": {\n    \"estado\": \"AA\",\n    \"codigo\": \"000\",\n    \"descripcion\": \"Reactivaci\u00f3n aceptada\"\n  }\n}\n</code></pre><p></p> <p>4) PUT /api/integra/trans/v1/traslado/setPacienteAvisar/{trasladoId}</p> Propiedad Descripci\u00f3n M\u00e9todo PUT Ruta /api/integra/trans/v1/traslado/setPacienteAvisar/{trasladoId} operationId putPacienteAvisar Resumen Establece el estado \u201cpaciente-avisar\u201d en un traslado Respuestas 201: Response500: Response Par\u00e1metros <p>Path</p> Propiedad Tipo Descripci\u00f3n trasladoId string Identificador del traslado. Requerido. <p>Query</p> Propiedad Tipo Descripci\u00f3n horaRecoger date-time Fecha y hora previstas de recogida. Requerido. <p>Ejemplo de llamada </p><pre><code>PUT /api/integra/trans/v1/traslado/setPacienteAvisar/TR-1001?horaRecoger=2025-11-15T07:30:00Z\n</code></pre><p></p> <p>Ejemplo de respuesta (201) </p><pre><code>{\n  \"resultado\": {\n    \"estado\": \"AA\",\n    \"codigo\": \"000\",\n    \"descripcion\": \"OK\"\n  }\n}\n</code></pre><p></p>"},{"location":"CircuitoA/circuitoA-doc.html#413-modelos-de-datos-segun-openapi","title":"4.1.3 Modelos de datos (seg\u00fan OpenAPI)","text":"<ul> <li>StatusInfo</li> <li> <p>status: array de Status</p> </li> <li> <p>Status</p> </li> <li>idTrasladoCCTSES (string, opcional)</li> <li>idTrasladoExterno (string, opcional)</li> <li>idVehiculo (string, requerido)</li> <li>idUnidad (string, requerido)</li> <li>idEstadoTraslado (string, opcional) \u2192 TB_TRASLADO_ESTADOS</li> <li>idEstadoVehiculo (string, opcional) \u2192 TB_VEHICULO_ESTADOS</li> <li>fechaHora (date-time, requerido)</li> <li>idMotivo (string, opcional) \u2192 TB_MOTIVO_ESTADOS</li> <li>gps (objeto Gps, opcional seg\u00fan caso de uso)</li> <li>idActividadJornada (string, opcional) \u2192 TB_ACTIVIDAD_TIPOS</li> <li> <p>idJornada (string, opcional)</p> </li> <li> <p>Gps</p> </li> <li> <p>longitud (string), latitud (string), rumbo (number), velocidad (integer)</p> </li> <li> <p>TrasladoReactivaDto</p> </li> <li>trasladoIDs (string, opcional, IDs separados por \u201c,\u201d)</li> <li>fechaHora (date-time, requerido)</li> <li>idMotivo (string, requerido)</li> <li> <p>txMotivo (string, opcional)</p> </li> <li> <p>Response</p> </li> <li> <p>resultado: Result</p> </li> <li> <p>Result</p> </li> <li>estado (string): AA=OK, AE=Error</li> <li>codigo (string): 000=correcto</li> <li>descripcion (string)</li> </ul> <p>Notas de validaci\u00f3n y negocio: - Los c\u00f3digos de referencia de tablas TB_ deben existir en sus correspondientes cat\u00e1logos funcionales. - Para anulaciones, los c\u00f3digos deben pertenecer a TB_ANULACION_MOTIVOS. Para cambios de estado, los motivos seguir\u00e1n TB_MOTIVO_ESTADOS y los estados, TB_TRASLADO_ESTADOS o TB_VEHICULO_ESTADOS.</p>"}]}